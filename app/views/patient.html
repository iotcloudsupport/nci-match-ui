<div ng-controller="PatientController" ng-init="loadPatientData()">
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-lg-10">
            <h2>Patient</h2>
            <ol class="breadcrumb">
                <li>
                    <a ui-sref="dashboard">Dashboard</a>
                </li>
                <li>
                    <a ui-sref="patients">Patients</a>
                </li>
                <li class="active">
                    <strong>Patient {{ ::data.patient_id }}</strong>
                </li>
            </ol>
        </div>
        <div class="col-lg-2 text-right">
            <div class="top-toolbar-buttons">
                <button class="btn btn-success btn-outline" title="Export Patient data to PDF"><i class="fa fa-file-pdf-o"></i>&nbsp;&nbsp;PDF</button>
            </div>
        </div>
    </div>

    <div class="wrapper">

        <div class="no-horizontal-padding header-box-container">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="header-info-box top-main-header-box">
                        <dl class="dl-horizontal">
                            <dt>Patient ID</dt>
                            <dd>{{data.patient_id}}</dd>

                            <dt>Patient</dt>
                            <dd>{{data.gender}}, {{data.ethnicity}}</dd>

                            <dt>Last Rejoin Scan Date</dt>
                            <dd>{{ data.last_rejoin_scan_date | utc }}</dd>

                            <dt>Status</dt>
                            <dd ng-style="{'color':'{{ data.current_status | status }}'}">{{data.current_status}}</dd>

                            <dt> Current Step</dt>
                            <dd>{{data.current_step_number}}</dd>

                            <dt>Treatment Arm</dt>
                            <dd>
                                <treatment-arm-title name="currentTreatmentArm.name" stratum="currentTreatmentArm.stratum" version="currentTreatmentArm.version"></treatment-arm-title>
                            </dd>
                        </dl>
                    </div>
                </div>

                <div class="col-lg-6 col-md-6">
                    <div class="header-info-box top-main-header-box">
                        <dl class="dl-horizontal">
                            <dt>Disease Name</dt>
                            <dd>{{::data.disease.name}}</dd>

                            <dt>Disease Code Type</dt>
                            <dd>{{::data.disease.type}}</dd>

                            <dt>Disease Code</dt>
                            <dd>{{::data.disease.code}}</dd>

                            <dt>Prior Drugs</dt>
                            <dd>{{data.prior_drugs.join(', ')}}</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>

        <div class="tabs-container">
            <uib-tabset active="activeTabIndex">
                <uib-tab heading="Summary" select="setActiveTab('summary')">
                    <div class="panel-body">

                        <div ng-if="data.action_items">
                            <div class="ibox-title ibox-title-no-line">
                                <h3>Actions Needed</h3>
                            </div>
                            <action-items items="data.action_items" patient-id="patient_id"></action-items>
                        </div>

                        <div class="ibox-title ibox-title-no-line">
                            <h3>Treatment Arm History</h3>
                        </div>

                        <table class="table table-hover" role="grid">
                            <thead>
                                <tr>
                                    <th width="20%">Treatment Arm</th>
                                    <th width="10%">Step</th>
                                    <th width="50%">Assignment Reason</th>
                                    <th width="20%">Date Assigned</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="ta in data.ta_history" style="cursor: auto; " role="row" class="odd">
                                    <td>
                                        <treatment-arm-title name="ta.name" stratum="ta.stratum" version="ta.version"></treatment-arm-title>
                                    </td>
                                    <td>{{ta.step}}</td>
                                    <td>{{ta.assignment_reason}}</td>
                                    <td>{{ta.assignment_date | utc}}</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="ibox-title ibox-title-no-line">
                            <h3>Patient Timeline</h3>
                        </div>

                        <div class="ibox-content inspinia-timeline" ng-controller="ActivityController as activity" ng-init="activity.loadData()">
                            <div class="timeline-item" ng-repeat="timelineEvent in activity.data">
                                <patient-timeline timeline-event="timelineEvent" type="timelineEvent.event_type"></patient-timeline>
                            </div>
                        </div>

                    </div>
                </uib-tab>

                <uib-tab heading="Surgical Events" select="setActiveTab('surgical_event')">
                    <div class="panel-body">
                        <div ng-if="currentSurgicalEvent">

                            <div class="row content-select-list">
                                <div class="col-md-12">
                                    <h4>
                                        <div class="btn-group" uib-dropdown dropdown-append-to-body>
                                            <button id="btn-append-to-body" type="button" class="btn btn-success btn-outline" uib-dropdown-toggle>{{surgicalEventOption.text}}<span class="caret"></span></button>
                                            <ul class="dropdown-menu" uib-dropdown-menu role="menu">
                                                <li ng-repeat="item in surgicalEventOptions" role="menuitem"><a href ng-click="onSurgicalEventSelected(item)">{{item.text}}</a></li>
                                            </ul>
                                        </div>
                                    </h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="header-info-box biopsy-header-box">
                                        <h4>Event</h4>
                                        <dl class="dl-horizontal">
                                            <dt>Surgical Event ID</dt>
                                            <dd>{{currentSurgicalEvent.surgical_event_id}}</dd>

                                            <dt>Type</dt>
                                            <dd>{{currentSurgicalEvent.type}}</dd>

                                            <dt>Collection Date</dt>
                                            <dd>{{currentSurgicalEvent.collected_date | utc}}</dd>

                                            <dt>Received Date</dt>
                                            <dd>{{currentSurgicalEvent.received_date | utc}}</dd>

                                            <dt>Failure Date</dt>
                                            <dd>{{currentSurgicalEvent.failed_date | utc}}</dd>
                                        </dl>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="header-info-box biopsy-header-box">
                                        <h4>Pathology</h4>
                                        <dl class="dl-horizontal">
                                            <dt>Status</dt>
                                            <dd>{{currentSurgicalEvent.pathology_status}}</dd>

                                            <dt>Received Date</dt>
                                            <dd>{{currentSurgicalEvent.pathology_status_date | utc}}</dd>

                                            <dt>Comment</dt>
                                            <dd>{{currentSurgicalEvent.comments}}</dd>
                                        </dl>
                                    </div>
                                </div>
                            </div>

                            <div class="ibox-title ibox-title-no-line">
                                <h3>Slide Shipments</h3>
                            </div>

                            <table class="table" role="grid">
                                <thead>
                                    <tr>
                                        <th width="20%" class="label2">Bar-Code</th>
                                        <th width="40%" class="label2">Carrier</th>
                                        <th width="20%" class="label2">Tracking Number</th>
                                        <th width="20%" class="label2">Date Shipped</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="slide in currentSurgicalEvent.slides" style="cursor: auto;" role="row" class="odd">
                                        <td>{{slide.slide_barcode}}</td>
                                        <td>{{slide.carrier}}</td>
                                        <td><a href="http://www.fedex.com/Tracking?action=track&tracknumbers={{slide.tracking_id}}" target="_blank">{{slide.tracking_id}}</a></td>
                                        <td>{{slide.shipped_dttm | utc}}</td>
                                    </tr>
                                </tbody>
                            </table>

                            <div class="ibox-title ibox-title-no-line">
                                <h3>Assay History</h3>
                            </div>

                            <table class="table" role="grid">
                                <thead>
                                    <tr>
                                        <th width="20%" class="label2">Gene</th>
                                        <th width="40%" class="label2">Ordered Date</th>
                                        <th width="20%" class="label2">Result Date</th>
                                        <th width="20%" class="label2">Result</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="assay in currentSurgicalEvent.assays" style="cursor: auto;" role="row" class="odd">
                                        <td>{{assay.gene}}</td>
                                        <td>{{assay.ordered_date | utc}}</td>
                                        <td>{{assay.result_date | utc}}</td>
                                        <td>
                                            <span ng-style="{'color':'{{ assay.result | assayStatus }}'}">{{assay.result}}</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <div class="ibox-title ibox-title-no-line">
                                <h3>Specimen History</h3>
                            </div>

                            <div class="ibox-content ibox-content-no-padding ibox-title-no-line">
                                <table class="table table-hover" role="grid">
                                    <thead>
                                        <tr>
                                            <th width="20%">Molecular ID</th>
                                            <th width="15%">Type</th>
                                            <th width="15%">Site</th>
                                            <th width="10%">Tracking Number</th>
                                            <th width="5%">DNA Conc</th>
                                            <th width="5%">DNA Vol</th>
                                            <th width="15%">Reported Date</th>
                                            <th width="20%">Comments</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat-start="shipment in currentSurgicalEvent.specimen_shipments" style="cursor: auto;" role="row" class="odd">
                                            <td>{{shipment.molecular_id}}</td>
                                            <td>{{shipment.type}}</td>
                                            <td>{{shipment.site}}</td>
                                            <td><a href="http://www.fedex.com/Tracking?action=track&tracknumbers={{shipment.tracking_number}}" target="_blank">{{shipment.tracking_number}}</a></td>
                                            <td>{{shipment.dna_concordance}}</td>
                                            <td>{{shipment.dna_volume}}</td>
                                            <td>{{shipment.reported_date | utc}}</td>
                                            <td>
                                                <div class="text-truncate-200px">{{shipment.comments}}</div>
                                            </td>
                                        </tr>
                                        <tr ng-repeat-end>
                                            <td colspan="8">
                                                <ul class="panel-list">
                                                    <li ng-repeat="analysis in shipment.analyses" class="info-element">
                                                        <div class="row">
                                                            <div class="col-md-4 col-sm-6 text-left">
                                                                <dl class="dl-horizontal-narrow">
                                                                    <dt>Analysis ID</dt>
                                                                    <dd><a> {{analysis.analysis_id}} </a></dd>

                                                                    <dt>Status</dt>
                                                                    <dd ng-style="{'color':'{{ analysis.status | analysisStatus }}'}">{{analysis.status | titlecase}} <span ng-if="analysis.comment_user"> (user: {{analysis.comment_user}})</span></dd>

                                                                    <dt ng-if="analysis.comment">Comment</dt>
                                                                    <dd ng-if="analysis.comment">{{analysis.comment}}</dd>
                                                                </dl>
                                                            </div>
                                                            <div class="col-md-5 col-sm-6 text-left">
                                                                <dl class="dl-horizontal-narrow">
                                                                    <dt>File Received Date</dt>
                                                                    <dd>{{analysis.file_received_date | utc}}</dd>

                                                                    <dt ng-if="needToDisplayReportStatus(analysis)">{{analysis.status | titlecase}} Date</dt>
                                                                    <dd ng-if="needToDisplayReportStatus(analysis)">{{analysis.status_date | utc}}</dd>
                                                                </dl>
                                                            </div>
                                                            <div class="col-md-3 text-right">
                                                                <div class="row">
                                                                    <div class="col-md-12 text-right">
                                                                        <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(analysis.dna_bam_file_path)">DNA BAM</a>
                                                                        <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(analysis.dna_bai_file_path)">DNA BAI</a>
                                                                        <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(analysis.vcf_path)">VCF</a>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-12 text-right">
                                                                        <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(analysis.rna_bam_file_path)">RNA BAM</a>
                                                                        <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(analysis.rna_bai_file_path)">RNA BAI</a>
                                                                        <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(analysis.qc_report_file_path)">QC Report</a>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-12 text-right">
                                                                        <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getAllFilesButtonClass(analysis, 'dna_bam_file_path', 'dna_bai_file_path', 'vcf_path', 'rna_bai_file_path', 'rna_bam_file_path')">All (Zip)</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </li>
                                                    <li ng-if="shipment.analyses && shipment.analyses.length > 0 && shipment.analyses[shipment.analyses.length - 1].status === 'PENDING'" class="success-element">
                                                        <div class="row">
                                                            <div class="col-md-3 pull-right text-right">
                                                                <a href="#" class="btn btn-xs btn-outline file-button-xs-3x btn-success" title="Upload new BAM file">Upload new sample file</a>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div ng-if="!currentSurgicalEvent">
                            <div class="row">
                                <div class="col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2">
                                    <div class="no-data-panel text-muted">
                                        <i class="fa fa-info-circle fa-2x"></i><span> The Surgical Event information has not been received.</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </uib-tab>

                <uib-tab heading="Tissue Reports" select="setActiveTab('tissue_report')">
                    <div class="panel-body">

                        <!--Variant Report-->
                        <div class="ibox">
                            <div class="ibox-title ibox-title-no-line">
                                <h2>Variant Report</h2>
                            </div>
                            <div class="ibox-content ibox-content-no-padding ibox-title-no-line">
                                <div ng-if="currentVariantReport">

                                    <div class="row toolbar-row">
                                        <div class="col-md-8 text-left">
                                            <div class="btn-group btn-group-margin" data-toggle="buttons">
                                            </div>
                                            <div class="btn-group btn-group-margin" data-toggle="buttons">
                                                <label class="btn btn-outline btn-success" ng-class="getVariantReportModeClass('FILTERED')"
                                                       ng-click="setVariantReportMode('FILTERED')" title="Show Filtered Report">
                                            <input type="radio" name="variantReportMode" id="option3">Filtered
                                        </label>
                                                <label class="btn btn-outline btn-success" ng-class="getVariantReportModeClass('QC')"
                                                       ng-click="setVariantReportMode('QC')" title="Show to QC Report">
                                            <input type="radio" name="variantReportMode" id="option4">QC Report
                                        </label>
                                            </div>
                                        </div>
                                        <div class="col-md-4 text-right">
                                            <button class="btn btn-outline btn-success" title="Export Variant Report to Excel"><i class="fa fa-file-excel-o"></i>&nbsp;&nbsp;Excel</button>
                                        </div>
                                    </div>

                                    <div class="row content-select-list">
                                        <div class="col-md-12">
                                            <h4>
                                                <div class="btn-group" uib-dropdown dropdown-append-to-body>
                                                    <button id="btn-append-to-body" type="button" class="btn btn-success btn-outline" uib-dropdown-toggle>{{variantReportOption.text}}<span class="caret"></span></button>
                                                    <ul class="dropdown-menu" uib-dropdown-menu role="menu">
                                                        <li ng-repeat="item in variantReportOptions" role="menuitem"><a href ng-click="onVariantReportSelected(item)">{{item.text}}</a></li>
                                                    </ul>
                                                </div>
                                            </h4>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="header-info-box  variant-report-header-box">
                                                <dl class="dl-horizontal">
                                                    <dt>Surgical Event ID</dt>
                                                    <dd>{{currentVariantReport.surgical_event_id}}</dd>

                                                    <dt>Analysis ID</dt>
                                                    <dd>{{currentVariantReport.analysis_id}}</dd>

                                                    <dt>Molecular ID</dt>
                                                    <dd>{{currentVariantReport.molecular_id}}</dd>

                                                    <dt>Files</dt>
                                                    <dd>
                                                        <a href="{{currentVariantReport.dna_bam_file_path}}" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(currentVariantReport.dna_bam_file_path)">DNA BAM</a>
                                                        <a href="{{currentVariantReport.dna_bam_file_path}}" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(currentVariantReport.dna_bai_file_path)">DNA BAI</a>
                                                        <a href="{{currentVariantReport.dna_bam_file_path}}" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(currentVariantReport.vcf_path)">VCF</a>
                                                    </dd>
                                                    <dd>
                                                        <a href="{{currentVariantReport.dna_bam_file_path}}" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(currentVariantReport.rna_bam_file_path)">RNA BAM</a>
                                                        <a href="{{currentVariantReport.dna_bam_file_path}}" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(currentVariantReport.rna_bai_file_path)">RNA BAI</a>
                                                        <a href="{{currentVariantReport.dna_bam_file_path}}" class="btn btn-xs btn-outline file-button-xs" ng-class="getAllFilesButtonClass(currentVariantReport, 'dna_bam_file_path', 'dna_bai_file_path', 'vcf_path', 'rna_bai_file_path', 'rna_bam_file_path')">All (Zip)</a>
                                                    </dd>

                                                    <dt>File Received Date</dt>
                                                    <dd>{{currentVariantReport.variant_report_received_date | utc}}</dd>

                                                    <dt ng-show="variantReport.confirmedRejectedDate">{{currentVariantReport.confirmedRejectedDateLabel}}</dt>
                                                    <dd ng-show="variantReport.confirmedRejectedDate">{{currentVariantReport.confirmedRejectedDate | utc}}</dd>

                                                    <dt>Status</dt>
                                                    <dd ng-style="{'color':'{{ currentVariantReport.status | analysisStatus }}'}">{{currentVariantReport.status}} <span ng-if="currentVariantReport.comment_user"> (user: {{currentVariantReport.comment_user}})</span></dd>

                                                    <dt ng-if="currentVariantReport.comment">Comments</dt>
                                                    <dd ng-if="currentVariantReport.comment">{{currentVariantReport.comment}}</dd>

                                                    <dt ng-if="needToDisplayReportStatus(currentVariantReport)">{{currentVariantReport.status | titlecase}} Date</dt>
                                                    <dd ng-if="needToDisplayReportStatus(currentVariantReport)">{{currentVariantReport.status_date | utc}}</dd>
                                                </dl>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="header-info-box variant-report-header-box">

                                                <dl class="dl-horizontal dl-horizontal-expanded-label">
                                                    <dt>Total Variants</dt>
                                                    <dd>{{currentVariantReport.total_variants}}</dd>

                                                    <dt>Cellularity</dt>
                                                    <dd>{{currentVariantReport.cellularity}}</dd>
                                                </dl>

                                                <dl class="dl-horizontal dl-horizontal-expanded-label" ng-if="variantReportMode=='QC'">
                                                    <dt>Oncomine Control Panel Summary</dt>
                                                    <dd class="row">
                                                        <table class="table" role="grid" width="100">
                                                            <thead>
                                                                <td><a>LMNA</a></td>
                                                                <td><a>TBP</a></td>
                                                                <td><a>MYC</a></td>
                                                                <td><a>HMBS</a></td>
                                                                <td><a>ITGBY</a></td>
                                                                <td>SUM</td>
                                                            </thead>
                                                            <tbody class="priordrug-item" ng-repeat="oncomine in currentVariantReport.oncomine_report" style="font-size: smaller">
                                                                <td>{{::oncomine.lmna}}</td>
                                                                <td>{{::oncomine.tbp}}</td>
                                                                <td>{{::oncomine.myc}}</td>
                                                                <td>{{::oncomine.hmbs}}</td>
                                                                <td>{{::oncomine.itgby}}</td>
                                                                <td>{{::oncomine.sum}}</td>
                                                            </tbody>
                                                        </table>
                                                    </dd>
                                                </dl>

                                                <h4 ng-if="variantReportMode!=='QC'">MOI/aMOI Summary</h4>

                                                <dl class="dl-horizontal dl-horizontal-expanded-label" ng-if="variantReportMode!=='QC'">
                                                    <dt>Total MOIs</dt>
                                                    <dd>{{currentVariantReport.total_mois}}</dd>
                                                    <dt>Total aMOIs</dt>
                                                    <dd>{{currentVariantReport.total_amois}}</dd>
                                                    <dt>Total Confirmed MOIs</dt>
                                                    <dd>{{currentVariantReport.total_confirmed_mois}}</dd>
                                                    <dt>Total Confirmed aMOIs</dt>
                                                    <dd>{{currentVariantReport.total_confirmed_amois}}</dd>
                                                </dl>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="panel panel-warning" ng-if="needToDisplayCbnaWarning()">
                                        <div class="panel-heading"><i class="fa fa-warning"></i>Warning</div>
                                        <div class="panel-body" id="selected-body">
                                            <p>cDNA is not present</p>
                                        </div>
                                    </div>

                                    <div ng-if="activeTab=='tissue_report'" d3-cnv-chart=""></div>








                                    <div ng-if="variantReportMode === 'FILTERED'">
                                        <!--Single Nucleitide Variant(s)-->
                                        <div class="ibox-title ibox-title-no-line">
                                            <h3>SNVs/MNVs/Indels</h3>
                                        </div>

                                        <table class="table table-hover" role="grid">
                                            <thead>
                                                <tr>
                                                    <th ng-if="variantReportMode!=='QC'">Confirm</th>
                                                    <th ng-if="variantReportMode!=='QC'">Comment</th>
                                                    <th>ID</th>
                                                    <th ng-if="variantReportMode!=='QC'">aMOI</th>
                                                    <th>Chrom</th>
                                                    <th>Position</th>
                                                    <th>CDS Ref</th>
                                                    <th>CDS Alt</th>
                                                    <th>OCP Ref</th>
                                                    <th>OCP Alt</th>
                                                    <th>Strand</th>
                                                    <th>Allele Freq</th>
                                                    <th>Func Gene</th>
                                                    <th>Oncomine Variant Class</th>
                                                    <th>Exon</th>
                                                    <th>Function</th>
                                                    <th>HGVS</th>
                                                    <th>Read Depth</th>
                                                    <th>Transcript</th>
                                                    <th>Protein</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="variant in currentVariantReport.variants.snvs_and_indels" style="cursor: auto;" role="row" class="odd">
                                                    <td ng-if="variantReportMode!=='QC'">
                                                        <div check-box-with-confirm confirm-title="{{confirmTitle}}" confirm-message="{{confirmMessage}}" is-checked="variant.confirmed" comment="variant.comment" prompt-only-if="true" enabled="currentVariantReport.status==='PENDING'">
                                                        </div>
                                                    </td>
                                                    <td ng-if="variantReportMode!=='QC'">
                                                        <a ng-if="variant.comment " href ng-click="editComment(variant, currentVariantReport.status==='PENDING' )"> <i class="fa fa-file-text-o "></i></a>
                                                    </td>
                                                    <td>{{::variant.variant_id}}</td>
                                                    <td ng-if="variantReportMode!=='QC'">{{::variant.aMOI}}<sup>({{::variant.inclusion}})</sup></td>
                                                    <td>{{::variant.chromosome}}</td>
                                                    <td>{{::variant.position}}</td>
                                                    <td>{{::variant.cds_ref}}</td>
                                                    <td>{{::variant.cds_alt}}</td>
                                                    <td>{{::variant.ocp_ref}}</td>
                                                    <td>{{::variant.ocp_alt}}</td>
                                                    <td>{{::variant.strand}}</td>
                                                    <td>{{::variant.allele_frequency}}</td>
                                                    <td>{{::variant.funcGene}}</td>
                                                    <td>{{::variant.oncomine_variant_class}}</td>
                                                    <td>{{::variant.exon}}</td>
                                                    <td>{{::variant.function}}</td>
                                                    <td>{{::variant.hgvs}}</td>
                                                    <td>{{::variant.read_depth}}</td>
                                                    <td>{{::variant.transcript}}</td>
                                                    <td>{{::variant.protein}}</td>
                                                </tr>

                                                <tr ng-if="!currentVariantReport.variants.snvs_and_indels || !currentVariantReport.variants.snvs_and_indels.length">
                                                    <td colspan="8"><span class="text-muted">No SNVs, MNVs or Indels</span></td>
                                                </tr>
                                            </tbody>
                                        </table>

                                        <!--Copy Number Variant(s)-->
                                        <div class="ibox-title ibox-title-no-line">
                                            <h3>Copy Number Variant(s)</h3>
                                        </div>

                                        <table class="table table-hover" role="grid">
                                            <thead>
                                                <tr>
                                                    <th ng-if="variantReportMode!=='QC'">Confirm</th>
                                                    <th ng-if="variantReportMode!=='QC'">Comment</th>
                                                    <th>ID</th>
                                                    <th ng-if="variantReportMode!=='QC'">aMOI</th>
                                                    <th>Chrom</th>
                                                    <th>Raw CN</th>
                                                    <th>CN</th>
                                                    <th>CI 5%</th>
                                                    <th>CI 95%</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="variant in currentVariantReport.variants.copy_number_variants" style="cursor: auto;" role="row" class="odd">
                                                    <td ng-if="variantReportMode!=='QC'">
                                                        <div check-box-with-confirm confirm-title="{{confirmTitle}}" confirm-message="{{confirmMessage}}" is-checked="variant.confirmed" comment="variant.comment" prompt-only-if="true" enabled="currentVariantReport.status==='PENDING'">
                                                        </div>
                                                    </td>
                                                    <td ng-if="variantReportMode!=='QC' ">
                                                        <a ng-if="variant.comment " href ng-click="editComment(variant, currentVariantReport.status==='PENDING' )"> <i class="fa fa-file-text-o "></i></a>
                                                    </td>
                                                    <td>{{variant.identifier}}</td>
                                                    <td ng-if="variantReportMode!=='QC'">{{variant.aMOI}}<sup>({{variant.inclusion}})</sup></td>
                                                    <td>{{variant.chromosome}}</td>
                                                    <td>{{variant.rawCopyNumber}}</td>
                                                    <td>{{variant.copyNumber}}</td>
                                                    <td>{{variant.confidenceInterval5percent}}</td>
                                                    <td>{{variant.confidenceInterval95percent}}</td>
                                                </tr>

                                                <tr ng-if="!currentVariantReport.variants.copy_number_variants || !currentVariantReport.variants.copy_number_variants.length">
                                                    <td colspan="8"><span class="text-muted">No Copy Number Variants</span></td>
                                                </tr>
                                            </tbody>
                                        </table>

                                        <!--Gene Fusion(s)-->
                                        <div class="ibox-title ibox-title-no-line">
                                            <h3>Gene Fusion(s)</h3>
                                        </div>

                                        <table class="table table-hover" role="grid">
                                            <thead>
                                                <tr>
                                                    <th ng-if="variantReportMode!=='QC'">Confirm</th>
                                                    <th ng-if="variantReportMode!=='QC'">Comment</th>
                                                    <th>ID</th>
                                                    <th ng-if="variantReportMode!=='QC'">aMOI</th>
                                                    <th>Gene 2</th>
                                                    <th>Gene 2 Count</th>
                                                    <th>Gene 1</th>
                                                    <th>Gene 1 Count</th>
                                                    <th>Annotation</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="variant in currentVariantReport.variants.gene_fusions" style="cursor: auto;" role="row" class="odd">
                                                    <td ng-if="variantReportMode!=='QC'">
                                                        <div check-box-with-confirm confirm-title="{{confirmTitle}}" confirm-message="{{confirmMessage}}" is-checked="variant.confirmed" comment="variant.comment" prompt-only-if="true" enabled="currentVariantReport.status==='PENDING'">
                                                        </div>
                                                    </td>
                                                    <td ng-if="variantReportMode!=='QC'">
                                                        <a ng-if="variant.comment " href ng-click="editComment(variant, currentVariantReport.status==='PENDING' )"> <i class="fa fa-file-text-o "></i></a>
                                                    </td>
                                                    <td>{{variant.identifier}}</td>
                                                    <td ng-if="variantReportMode!=='QC'">{{variant.aMOI}}<sup>({{variant.inclusion}})</sup></td>
                                                    <td>{{variant.gene2}}</td>
                                                    <td>{{variant.gene2count}}</td>
                                                    <td>{{variant.gene}}</td>
                                                    <td>{{variant.gene1count}}</td>
                                                    <td>{{variant.annotation}}</td>
                                                </tr>

                                                <tr ng-if="!currentVariantReport.variants.gene_fusions || !currentVariantReport.variants.gene_fusions.length">
                                                    <td colspan="8"><span class="text-muted">No Gene Fusions</span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div ng-if="variantReportMode === 'QC'">


                                        <!--TABLES-->
                                        <div class="no-horizontal-padding header-box-container" >

                                            <div class="animated fadeInRight">

                                                <div class="row" >

                                                    <div class="col-lg-12">
                                                        <div class="tabs-container" >
                                                            <uib-tabset >

                                                                <uib-tab heading="SNVs/MNVs/Indels">

                                                                    <div class="panel-body"

                                                                         ng-init="loadSnv_Table()">
                                                                        <table datatable="ng"
                                                                               dt-options="dtOptions"
                                                                               dt-column-defs="dtColumnDefs"
                                                                               dt-instance="dtInstance"
                                                                               dt-columns="dtColumns"
                                                                               class="table table-striped table-bordered table-hover">

                                                                            <thead>

                                                                            <tr><div confirmed="confirmed" custom-element class="pull-left" style="width:200px"></div></tr>

                                                                            <tr>
                                                                                <th class="label2" >Id</th>
                                                                                <th class="label2" >Chrom</th>
                                                                                <th class="label2" >Position</th>
                                                                                <th class="label2" >Reference</th>
                                                                                <th class="label2" >Alternative</th>
                                                                                <th class="label2" >Filter</th>
                                                                                <th class="label2" >Allele Freq</th>

                                                                                <th class="label2" >Func Gene</th> <!-- openCosmicGene("MTOR") -->
                                                                                <th class="label2" >Oncomine Variant Class</th>
                                                                                <th class="label2" >Exon</th>
                                                                                <th class="label2" >Function</th>
                                                                                <th class="label2" >Hgvs</th>
                                                                                <th class="label2" >Read Depth</th>
                                                                                <th class="label2" >Transcript</th>
                                                                                <th class="label2" >Protein</th>
                                                                            </tr>

                                                                            </thead>

                                                                            <tbody>

                                                                            <tr ng-repeat="ta in snvList | limitTo:totalDisplayed | filter:filterCol" style="cursor: auto; " role="row" class="odd">

                                                                                <td>{{::ta.identifier || '-'}}</td>
                                                                                <td>{{::ta.chromosome || '-'}}</td>
                                                                                <td>{{::ta.position || '-'}}</td>
                                                                                <td>{{::ta.reference || '-'}}</td>
                                                                                <td>{{::ta.alternative || '-'}}</td>
                                                                                <td>{{::ta.filter || '-'}}</td>
                                                                                <td>{{::ta.alleleFrequency || '-'}}</td>
                                                                                <td>
                                                                                    <a href ng-click="openCosmicGene(ta.gene)" class="report-link">{{::ta.gene}}</a>
                                                                                </td>
                                                                                <td>{{::ta.oncominevariantclass || '-'}}</td>
                                                                                <td>{{::ta.exon || '-'}}</td>
                                                                                <td>{{::ta.function || '-'}}</td>
                                                                                <td>{{::ta.hgvs || '-'}}</td>
                                                                                <td>{{::ta.readDepth || '-'}}</td>
                                                                                <td>{{::ta.transcript || '-'}}</td>
                                                                                <td>{{::ta.proteinMatch || '-'}}</td>

                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>


                                                                </uib-tab>

                                                                <uib-tab heading="Copy Number Variant(s)  ">

                                                                    <div class="panel-body"
                                                                         ng-controller="QcSampleController as DashCtrl"
                                                                         ng-init="loadQc_Table()">


                                                                        <table datatable="ng"
                                                                               dt-options="DashCtrl.ddOptions"
                                                                               dt-column-defs="DashCtrl.dtColumnDefs"
                                                                               dt-instance="DashCtrl.dtInstance"
                                                                               dt-columns="dtColumns"
                                                                               class="table table-striped table-bordered table-hover">
                                                                            <thead>

                                                                            <tr><div confirmed="confirmed" custom-element class="pull-left" style="width:200px"></div></tr>

                                                                            <tr>
                                                                                <th class="label2" >Id</th>
                                                                                <th class="label2" >Chrom</th>
                                                                                <th class="label2" >Position</th>
                                                                                <th class="label2" >Reference</th>
                                                                                <th class="label2" >Alternative</th>
                                                                                <th class="label2" >Filter</th>
                                                                                <th class="label2" >RAW Nc</th>
                                                                                <th class="label2" >FCN</th>
                                                                                <th class="label2" >Cl 5%</th>
                                                                                <th class="label2" >Cl 95%</th>
                                                                            </tr>
                                                                            </thead>
                                                                            <tbody>


                                                                            <tr ng-repeat="ta in cnvList | limitTo:totalDisplayed | filter:filterCol" style="cursor: auto; " role="row" class="odd">
                                                                                <td>
                                                                                    <a href ng-click="openCosmicGene(ta.identifier)" class="report-link"> {{::ta.identifier || '-'}} </a>
                                                                                </td>
                                                                                <td>{{::ta.chromosome || '-'}}</td>
                                                                                <td>{{::ta.position || '-'}}</td>
                                                                                <td>{{::ta.reference || '-'}}</td>
                                                                                <td>{{::ta.alternative || '-'}}</td>
                                                                                <td>{{::ta.filter || '-'}}</td>
                                                                                <td>{{::ta.rawCopyNumber || '-'}}</td>
                                                                                <td>{{::ta.copyNumber || '-'}}</td>
                                                                                <td>{{::ta.confidenceInterval5percent || '-'}}</td>
                                                                                <td>{{::ta.confidenceInterval95percent || '-'}}</td>

                                                                            </tr>
                                                                            </tbody>
                                                                        </table>

                                                                    </div>

                                                                </uib-tab>

                                                                <uib-tab heading="Gene Fusion(s)  ">

                                                                    <div class="panel-body"
                                                                         ng-controller="QcSampleController as DashCtrl"
                                                                         ng-init="loadGene_Table()">


                                                                        <table datatable="ng"
                                                                               dt-options="DashCtrl.ddOptions"
                                                                               dt-column-defs="DashCtrl.dtColumnDefs"
                                                                               dt-instance="DashCtrl.dtInstance"
                                                                               dt-columns="dtColumns"
                                                                               class="table table-striped table-bordered table-hover">
                                                                            <thead>

                                                                            <tr><div confirmed="confirmed" custom-element class="pull-left" style="width:200px"></div></tr>

                                                                            <tr>
                                                                                <th class="label2" >Id</th> <!--openCosmicGene("ACVRL1")-->
                                                                                <th class="label2" >Chrom</th>
                                                                                <th class="label2" >Position</th>
                                                                                <th class="label2" >Reference</th>
                                                                                <th class="label2" >Alternative</th>
                                                                                <th class="label2" >Filter</th>
                                                                                <th class="label2" >Func Gene</th>
                                                                                <th class="label2" >Oncomine Variant Class</th>
                                                                                <th class="label2" >Exon</th>
                                                                                <th class="label2" >Function</th>
                                                                                <th class="label2" >Read Count</th>
                                                                            </tr>
                                                                            </thead>
                                                                            <tbody>

                                                                            <tr ng-repeat="ta in geneList | limitTo:totalDisplayed " style="cursor: auto; " role="row" class="odd">
                                                                                <td>
                                                                                    <a href ng-click="openCosmicFusionId(ta.identifier)" class="report-link"> {{::ta.identifier || '-'}} </a>
                                                                                    <!--{{::ta.chromosome || '-'}}-->
                                                                                </td>
                                                                                <td>{{::ta.chromosome || '-'}}</td>
                                                                                <td>{{::ta.position || '-'}}</td>
                                                                                <td>{{::ta.reference || '-'}}</td>
                                                                                <td>{{::ta.alternative || '-'}}</td>
                                                                                <td>{{::ta.filter || '-'}}</td>
                                                                                <td>

                                                                                    {{::ta.gene || '-'}}

                                                                                </td>
                                                                                <td>{{::ta.oncominevariantclass || '-'}}</td>
                                                                                <td>{{::ta.exon || '-'}}</td>
                                                                                <td>{{::ta.function || '-'}}</td>
                                                                                <td>{{::ta.readDepth || '-'}}</td>

                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>

                                                                </uib-tab>

                                                            </uib-tabset>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <!--TABLES-->

                                        <!--<div class="row" >-->

                                            <!--<div class="col-md-16">-->
                                                <!--<div class="tabs-container" >-->
                                                    <!--<uib-tabset >-->

                                                        <!--<uib-tab heading="SNVs/MNVs/Indels">-->

                                                            <!--<div class="panel-body"-->
                                                                 <!--ng-init="loadSnv_Table()">-->
                                                                <!--<table datatable="ng"-->
                                                                       <!--dt-options="dtOptions"-->
                                                                       <!--dt-column-defs="dtColumnDefs"-->
                                                                       <!--dt-instance="dtInstance"-->
                                                                       <!--dt-columns="dtColumns"-->
                                                                       <!--class="table table-striped table-bordered table-hover"-->
                                                                       <!--style="font-size: 10px">-->

                                                                    <!--<thead>-->

                                                                    <!--<tr><div confirmed="confirmed" custom-element class="pull-left" style="width:200px"></div></tr>-->

                                                                    <!--<tr>-->
                                                                        <!--<th ng-if="variantReportMode!=='QC'">Confirm</th>-->
                                                                        <!--<th ng-if="variantReportMode!=='QC'">Comment</th>-->
                                                                        <!--<th class="" >Id</th>-->
                                                                        <!--<th ng-if="variantReportMode!=='QC'">aMOI</th>-->
                                                                        <!--<th class="" >Chrom</th>-->
                                                                        <!--<th class="" >Position</th>-->
                                                                        <!--<th class="" >Reference</th>-->
                                                                        <!--<th class="" >Alternative</th>-->
                                                                        <!--<th class="" >Filter</th>-->
                                                                        <!--<th class="" >Allele Freq</th>-->

                                                                        <!--<th class="" >Func Gene</th> &lt;!&ndash; openCosmicGene("MTOR") &ndash;&gt;-->
                                                                        <!--<th class="" >Oncomine Variant Class</th>-->
                                                                        <!--<th class="" >Exon</th>-->
                                                                        <!--<th class="" >Function</th>-->
                                                                        <!--<th class="" >Hgvs</th>-->
                                                                        <!--<th class="" >Read Depth</th>-->
                                                                        <!--<th class="" >Transcript</th>-->
                                                                        <!--<th class="" >Protein</th>-->
                                                                    <!--</tr>-->

                                                                    <!--</thead>-->

                                                                    <!--<tbody>-->

                                                                    <!--<tr ng-repeat="variant in currentVariantReport.variants.snvs_and_indels" style="cursor: auto; " role="row" class="odd">-->
                                                                        <!--<td ng-if="variantReportMode!=='QC'">-->
                                                                            <!--<div check-box-with-confirm confirm-title="{{confirmTitle}}"-->
                                                                                 <!--confirm-message="{{confirmMessage}}"-->
                                                                                 <!--is-checked="variant.confirmed"-->
                                                                                 <!--comment="variant.comment"-->
                                                                                 <!--prompt-only-if="true"-->
                                                                                 <!--enabled="currentVariantReport.status==='PENDING'">-->
                                                                            <!--</div>-->
                                                                        <!--</td>-->
                                                                        <!--<td ng-if="variantReportMode!=='QC'">-->
                                                                            <!--<a ng-if="variant.comment " href ng-click="editComment(variant, currentVariantReport.status==='PENDING' )">-->
                                                                                <!--<i class="fa fa-file-text-o "></i>-->
                                                                            <!--</a>-->
                                                                        <!--</td>-->
                                                                        <!--<td>{{::variant.variant_id || '-'}}</td>-->
                                                                        <!--<td ng-if="variantReportMode!=='QC'">{{::variant.aMOI}}<sup>({{::variant.inclusion}})</sup></td>-->
                                                                        <!--<td>{{::variant.chromosome || '-'}}</td>-->
                                                                        <!--<td>{{::variant.position || '-'}}</td>-->
                                                                        <!--<td>{{::variant.reference || '-'}}</td>-->
                                                                        <!--<td>{{::variant.alternative || '-'}}</td>-->
                                                                        <!--<td>{{::variant.filter || '-'}}</td>-->
                                                                        <!--<td>{{::variant.alleleFrequency || '-'}}</td>-->
                                                                        <!--<td>-->
                                                                            <!--<a href ng-click="openCosmicGene(ta.gene)" class="report-link">{{::variant.gene}}</a>-->
                                                                        <!--</td>-->
                                                                        <!--<td>{{::variant.oncominevariantclass || '-'}}</td>-->
                                                                        <!--<td>{{::variant.exon || '-'}}</td>-->
                                                                        <!--<td>{{::variant.function || '-'}}</td>-->
                                                                        <!--<td>{{::variant.hgvs || '-'}}</td>-->
                                                                        <!--<td>{{::variant.readDepth || '-'}}</td>-->
                                                                        <!--<td>{{::variant.transcript || '-'}}</td>-->
                                                                        <!--<td>{{::variant.proteinMatch || '-'}}</td>-->

                                                                    <!--</tr>-->
                                                                    <!--</tbody>-->
                                                                <!--</table>-->
                                                            <!--</div>-->


                                                        <!--</uib-tab>-->

                                                        <!--<uib-tab heading="Copy Number Variant(s)  ">-->

                                                            <!--<div class="panel-body"-->
                                                                 <!--ng-controller="QcSampleController as DashCtrl"-->
                                                                 <!--ng-init="loadQc_Table()">-->


                                                                <!--<table datatable="ng"-->
                                                                       <!--dt-options="DashCtrl.ddOptions"-->
                                                                       <!--dt-column-defs="DashCtrl.dtColumnDefs"-->
                                                                       <!--dt-instance="DashCtrl.dtInstance"-->
                                                                       <!--dt-columns="dtColumns"-->
                                                                       <!--class="table table-striped table-bordered table-hover">-->
                                                                    <!--<thead>-->

                                                                    <!--<tr><div confirmed="confirmed" custom-element class="pull-left" style="width:200px"></div></tr>-->

                                                                    <!--<tr>-->
                                                                        <!--<th class="label2" >Id</th>-->
                                                                        <!--<th class="label2" >Chrom</th>-->
                                                                        <!--<th class="label2" >Position</th>-->
                                                                        <!--<th class="label2" >Reference</th>-->
                                                                        <!--<th class="label2" >Alternative</th>-->
                                                                        <!--<th class="label2" >Filter</th>-->
                                                                        <!--<th class="label2" >RAW Nc</th>-->
                                                                        <!--<th class="label2" >FCN</th>-->
                                                                        <!--<th class="label2" >Cl 5%</th>-->
                                                                        <!--<th class="label2" >Cl 95%</th>-->
                                                                    <!--</tr>-->
                                                                    <!--</thead>-->
                                                                    <!--<tbody>-->


                                                                    <!--<tr ng-repeat="ta in cnvList | limitTo:totalDisplayed | filter:filterCol" style="cursor: auto; " role="row" class="odd">-->
                                                                        <!--<td>-->
                                                                            <!--<a href ng-click="openCosmicGene(ta.identifier)" class="report-link"> {{::ta.identifier || '-'}} </a>-->
                                                                        <!--</td>-->
                                                                        <!--<td>{{::ta.chromosome || '-'}}</td>-->
                                                                        <!--<td>{{::ta.position || '-'}}</td>-->
                                                                        <!--<td>{{::ta.reference || '-'}}</td>-->
                                                                        <!--<td>{{::ta.alternative || '-'}}</td>-->
                                                                        <!--<td>{{::ta.filter || '-'}}</td>-->
                                                                        <!--<td>{{::ta.rawCopyNumber || '-'}}</td>-->
                                                                        <!--<td>{{::ta.copyNumber || '-'}}</td>-->
                                                                        <!--<td>{{::ta.confidenceInterval5percent || '-'}}</td>-->
                                                                        <!--<td>{{::ta.confidenceInterval95percent || '-'}}</td>-->

                                                                    <!--</tr>-->
                                                                    <!--</tbody>-->
                                                                <!--</table>-->

                                                            <!--</div>-->

                                                        <!--</uib-tab>-->

                                                        <!--<uib-tab heading="Gene Fusion(s)  ">-->

                                                            <!--<div class="panel-body"-->
                                                                 <!--ng-controller="QcSampleController as DashCtrl"-->
                                                                 <!--ng-init="loadGene_Table()">-->


                                                                <!--<table datatable="ng"-->
                                                                       <!--dt-options="DashCtrl.ddOptions"-->
                                                                       <!--dt-column-defs="DashCtrl.dtColumnDefs"-->
                                                                       <!--dt-instance="DashCtrl.dtInstance"-->
                                                                       <!--dt-columns="dtColumns"-->
                                                                       <!--class="table table-striped table-bordered table-hover">-->
                                                                    <!--<thead>-->

                                                                    <!--<tr><div confirmed="confirmed" custom-element class="pull-left" style="width:200px"></div></tr>-->

                                                                    <!--<tr>-->
                                                                        <!--<th class="label2" >Id</th> &lt;!&ndash;openCosmicGene("ACVRL1")&ndash;&gt;-->
                                                                        <!--<th class="label2" >Chrom</th>-->
                                                                        <!--<th class="label2" >Position</th>-->
                                                                        <!--<th class="label2" >Reference</th>-->
                                                                        <!--<th class="label2" >Alternative</th>-->
                                                                        <!--<th class="label2" >Filter</th>-->
                                                                        <!--<th class="label2" >Func Gene</th>-->
                                                                        <!--<th class="label2" >Oncomine Variant Class</th>-->
                                                                        <!--<th class="label2" >Exon</th>-->
                                                                        <!--<th class="label2" >Function</th>-->
                                                                        <!--<th class="label2" >Read Count</th>-->
                                                                    <!--</tr>-->
                                                                    <!--</thead>-->
                                                                    <!--<tbody>-->

                                                                    <!--<tr ng-repeat="ta in geneList | limitTo:totalDisplayed " style="cursor: auto; " role="row" class="odd">-->
                                                                        <!--<td>-->
                                                                            <!--<a href ng-click="openCosmicFusionId(ta.identifier)" class="report-link"> {{::ta.identifier || '-'}} </a>-->
                                                                            <!--&lt;!&ndash;{{::ta.chromosome || '-'}}&ndash;&gt;-->
                                                                        <!--</td>-->
                                                                        <!--<td>{{::ta.chromosome || '-'}}</td>-->
                                                                        <!--<td>{{::ta.position || '-'}}</td>-->
                                                                        <!--<td>{{::ta.reference || '-'}}</td>-->
                                                                        <!--<td>{{::ta.alternative || '-'}}</td>-->
                                                                        <!--<td>{{::ta.filter || '-'}}</td>-->
                                                                        <!--<td>-->

                                                                            <!--{{::ta.gene || '-'}}-->

                                                                        <!--</td>-->
                                                                        <!--<td>{{::ta.oncominevariantclass || '-'}}</td>-->
                                                                        <!--<td>{{::ta.exon || '-'}}</td>-->
                                                                        <!--<td>{{::ta.function || '-'}}</td>-->
                                                                        <!--<td>{{::ta.readDepth || '-'}}</td>-->

                                                                    <!--</tr>-->
                                                                    <!--</tbody>-->
                                                                <!--</table>-->
                                                            <!--</div>-->

                                                        <!--</uib-tab>-->

                                                    <!--</uib-tabset>-->
                                                <!--</div>-->
                                            <!--</div>-->

                                        <!--</div>-->

                                    </div>






                                    <div class="ibox-content ibox-title-no-line" ng-if="showVariantReportActions(currentVariantReport)">
                                        <div class="row">
                                            <div class="col-md-12 text-center">
                                                <button class="btn btn-danger" title="Reject this Report" ng-click="rejectVariantReport(currentVariantReport)">REJECT</button>
                                                <button class="btn btn-success" title="Confirm this Report" ng-click="confirmVariantReport(currentVariantReport)">CONFIRM</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div ng-if="!currentVariantReport">
                                    <div class="row">
                                        <div class="col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2">
                                            <div class="no-data-panel text-muted">
                                                <i class="fa fa-info-circle fa-2x"></i><span> The Variant Report has not been received.</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Assignment Report-->
                        <div ng-if="variantReportMode!=='QC' && currentVariantReport" class="ibox">
                            <div class="ibox-title">
                                <div collapse-toggle-left></div>
                                <h2>Assignment Report</h2>
                            </div>

                            <div class="ibox-content ibox-content-no-padding ibox-title-no-line">

                                <div ng-if="currentVariantReport.status=='CONFIRMED'" class="row content-select-list">
                                    <div class="col-md-12">
                                        <h4>
                                            <div class="btn-group" uib-dropdown dropdown-append-to-body>
                                                <button id="btn-append-to-body" type="button" class="btn btn-success btn-outline" uib-dropdown-toggle>{{assignmentReportOption.text}}<span class="caret"></span></button>
                                                <ul class="dropdown-menu" uib-dropdown-menu role="menu">
                                                    <li ng-repeat="item in assignmentReportOptions" role="menuitem"><a href ng-click="onAssignmentReportSelected(item)">{{item.text}}</a></li>
                                                </ul>
                                            </div>
                                        </h4>
                                    </div>
                                </div>

                                <div ng-if="currentVariantReport.status=='CONFIRMED'">
                                    <div class="row button-row">
                                        <div class="col-md-12 text-right">
                                            <button class="btn btn-success btn-outline" title="Export Assignment Report to Excel"><i class="fa fa-file-excel-o"></i>&nbsp;&nbsp;Excel</button>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="header-info-box assignment-header-box">
                                                <dl class="dl-horizontal">
                                                    <dt>Molecular ID</dt>
                                                    <dd>{{currentAssignmentReport.molecular_id}}</dd>

                                                    <dt>Analysis ID</dt>
                                                    <dd>{{currentAssignmentReport.analysis_id}}</dd>

                                                    <dt>Status</dt>
                                                    <dd ng-style="{'color':'{{ currentAssignmentReport.status | analysisStatus }}'}">{{currentAssignmentReport.status}} <span ng-if="currentAssignmentReport.comment_user"> (user: {{currentAssignmentReport.comment_user}})</span></dd>

                                                    <dt ng-if="currentAssignmentReport.comment">Comments</dt>
                                                    <dd ng-if="currentAssignmentReport.comment">{{currentAssignmentReport.comment}}</dd>

                                                    <dt ng-if="needToDisplayReportStatus(currentAssignmentReport)">{{currentAssignmentReport.status | titlecase}} Date</dt>
                                                    <dd ng-if="needToDisplayReportStatus(currentAssignmentReport)">{{currentAssignmentReport.status_date | utc}}</dd>
                                                </dl>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="header-info-box assignment-header-box">
                                                <h4>Assignment</h4>
                                                <dl class="dl-horizontal">
                                                    <dt>Generated Date</dt>
                                                    <dd>{{currentAssignmentReport.generated_date | utc}}</dd>

                                                    <dt>Confirmed Date</dt>
                                                    <dd>{{currentAssignmentReport.confirmed_date | utc}}</dd>

                                                    <dt>Sent to COG Date</dt>
                                                    <dd>{{currentAssignmentReport.sent_to_cog_date | utc}}</dd>

                                                    <dt>Received from COG Date</dt>
                                                    <dd>{{currentAssignmentReport.received_from_cog_date | utc}}</dd>
                                                </dl>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="ibox-title ibox-title-no-line">
                                        <h3>Assay</h3>
                                    </div>

                                    <table class="table table-hover" role="grid">
                                        <thead>
                                            <tr>
                                                <th width="20%">IHC</th>
                                                <th width="40%">Result</th>
                                                <th width="40%">Comment</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="assay in currentAssignmentReport.assays" style="cursor: auto; " role="row" class="odd">
                                                <td>{{assay.gene}}</td>
                                                <td><span ng-style="{'color':'{{ assay.result | assayStatus }}'}">{{assay.result}}</span></td>
                                                <td>{{assay.comment}}</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <div class="panel panel-primary">
                                        <div class="panel-heading"><i class="fa fa-bullseye"></i>Selected Treatment Arm:  <strong>{{selectedTreatmentArm.treatment_arm}}</strong> </div>
                                        <div class="panel-body" id="selected-body">
                                            <p>{{selectedTreatmentArm.reason}}</p>
                                        </div>
                                    </div>

                                    <table class="table table-hover" role="grid">
                                        <thead>
                                            <tr>
                                                <th width="30%">Treatment Arm</th>
                                                <th width="70%">Reason</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="table-subheader ">
                                                <td colspan="8 ">
                                                    <h5>1 - NO VARIANT MATCH</h5>
                                                </td>
                                            </tr>
                                            <tr ng-repeat="ta in currentAssignmentReport.treatment_arms.no_match " style="cursor: auto; " role="row" class="odd">
                                                <td class="status-blue">
                                                    <treatment-arm-title name="ta.treatment_arm" version="ta.treatment_arm_version" stratum="ta.treatment_arm_stratum_id"></treatment-arm-title>
                                                </td>
                                                <td>{{::ta.reason}}</td>
                                            </tr>

                                            <tr class="table-subheader ">
                                                <td colspan="8 ">
                                                    <h5>2 - RECORD BASED EXCLUSION</h5>
                                                </td>
                                            </tr>
                                            <tr ng-repeat="ta in currentAssignmentReport.treatment_arms.record_based_exclusion " style="cursor: auto;
                                                " role="row " class="odd ">
                                                <td class="status-blue ">
                                                    <treatment-arm-title name="ta.treatment_arm" version="ta.treatment_arm_version" stratum="ta.treatment_arm_stratum_id"></treatment-arm-title>
                                                </td>
                                                <td>{{::ta.reason}}</td>
                                            </tr>

                                            <tr class="table-subheader ">
                                                <td colspan="8 ">
                                                    <h5>3 - SELECTED</h5>
                                                </td>
                                            </tr>
                                            <tr ng-repeat="ta in currentAssignmentReport.treatment_arms.selected " style="cursor: auto; " role="row" class="odd">
                                                <td class="status-blue ">
                                                    <treatment-arm-title name="ta.treatment_arm" version="ta.treatment_arm_version" stratum="ta.treatment_arm_stratum_id"></treatment-arm-title>
                                                </td>
                                                <td>{{::ta.reason}}</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <div class="ibox-content ibox-title-no-line" ng-if="showAssignmentReportActions(currentAssignmentReport)">
                                        <div class="row">
                                            <div class="col-md-12 text-center">
                                                <!-- RZ:Removed for now <button class="btn btn-danger" title="Reject this Report" ng-click="rejectAssignmentReport(currentAssignmentReport)">REJECT</button>-->
                                                <button class="btn btn-success" title="Confirm this Report" ng-click="confirmAssignmentReport(currentAssignmentReport)">CONFIRM</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div ng-if="currentVariantReport.status!='CONFIRMED'">
                                    <div class="row">
                                        <div class="col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2">
                                            <div class="no-data-panel text-muted">
                                                <i class="fa fa-info-circle fa-2x"></i><span> Assignment Report Is Not Available. The Variant Report is not yet approved.</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </uib-tab>

                <uib-tab heading="Blood Variant Reports" select="setActiveTab('blood_variant_report')">
                    <div class="panel-body">
                        <div ng-if="currentBloodVariantReport">
                            <div class="row toolbar-row">
                                <div class="col-md-8 text-left">
                                    <div class="btn-group btn-group-margin" data-toggle="buttons">
                                        <label class="btn btn-outline btn-success" ng-class="getVariantReportModeClass('FILTERED')" ng-click="setVariantReportMode('FILTERED')" title="Show Filtered Report">
                                        <input type="radio" name="variantReportMode" id="option3">Filtered
                                    </label>
                                        <label class="btn btn-outline btn-success" ng-class="getVariantReportModeClass('QC')" ng-click="setVariantReportMode('QC')" title="Show to QC Report">
                                        <input type="radio" name="variantReportMode" id="option4">QC Report
                                    </label>
                                    </div>
                                </div>
                                <div class="col-md-4 text-right">
                                    <button class="btn btn-outline btn-success" title="Export Variant Report to Excel"><i class="fa fa-file-excel-o"></i>&nbsp;&nbsp;Excel</button>
                                </div>
                            </div>

                            <div class="row content-select-list">
                                <div class="col-md-12">
                                    <h4>
                                        <div class="btn-group" uib-dropdown dropdown-append-to-body>
                                            <button id="btn-append-to-body" type="button" class="btn btn-success btn-outline" uib-dropdown-toggle>{{bloodVariantReportOption.text}}<span class="caret"></span></button>
                                            <ul class="dropdown-menu" uib-dropdown-menu role="menu">
                                                <li ng-repeat="item in bloodVariantReportOptions" role="menuitem"><a href ng-click="onBloodVariantReportSelected(item)">{{item.text}}</a></li>
                                            </ul>
                                        </div>
                                    </h4>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="header-info-box  variant-report-header-box">
                                        <dl class="dl-horizontal">
                                            <dt>Analysis ID</dt>
                                            <dd>{{currentBloodVariantReport.analysis_id}}</dd>

                                            <dt>Molecular ID</dt>
                                            <dd>{{currentBloodVariantReport.molecular_id}}</dd>

                                            <dt>Files</dt>
                                            <dd>
                                                <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(currentBloodVariantReport.dna_bam_file_path)">DNA BAM</a>
                                                <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(currentBloodVariantReport.dna_bai_file_path)">DNA BAI</a>
                                                <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(currentBloodVariantReport.vcf_path)">VCF</a>
                                            </dd>
                                            <dd>
                                                <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(currentBloodVariantReport.rna_bam_file_path)">RNA BAM</a>
                                                <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getFileButtonClass(currentBloodVariantReport.rna_bai_file_path)">RNA BAI</a>
                                                <a href="#" class="btn btn-xs btn-outline file-button-xs" ng-class="getAllFilesButtonClass(currentBloodVariantReport, 'dna_bam_file_path', 'dna_bai_file_path', 'vcf_path', 'rna_bai_file_path', 'rna_bam_file_path')">All (Zip)</a>
                                            </dd>

                                            <dt>File Received Date</dt>
                                            <dd>{{currentBloodVariantReport.variant_report_received_date | utc}}</dd>

                                            <dt>Status</dt>
                                            <dd ng-style="{'color':'{{ currentBloodVariantReport.status | analysisStatus }}'}">{{currentBloodVariantReport.status}}<span ng-if="currentBloodVariantReport.comment_user"> (user: {{currentBloodVariantReport.comment_user}})</span></dd>

                                            <dt ng-if="currentBloodVariantReport.comment">Comments</dt>
                                            <dd ng-if="currentBloodVariantReport.comment">{{currentBloodVariantReport.comment}}</dd>

                                            <dt ng-if="needToDisplayReportStatus(currentBloodVariantReport)">{{currentBloodVariantReport | titlecase}} Date</dt>
                                            <dd ng-if="needToDisplayReportStatus(currentBloodVariantReport)">{{currentBloodVariantReport.status_date | utc}}</dd>
                                        </dl>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="header-info-box variant-report-header-box">

                                        <dl class="dl-horizontal dl-horizontal-expanded-label">
                                            <dt>Total Variants</dt>
                                            <dd>{{currentBloodVariantReport.total_variants}}</dd>

                                            <dt>Cellularity</dt>
                                            <dd>{{currentBloodVariantReport.cellularity}}</dd>
                                        </dl>
                                    </div>
                                </div>
                            </div>

                            <div ng-if="activeTab=='blood_variant_report'" d3-cnv-chart=""></div>

                            <!--Single Nucleitide Variant(s)-->
                            <div class="ibox-title ibox-title-no-line">
                                <h3>SNVs/MNVs/Indels(s)</h3>
                            </div>

                            <table class="table table-hover" role="grid">
                                <thead>
                                    <tr>
                                        <th ng-if="variantReportMode!=='QC'">Confirm</th>
                                        <th ng-if="variantReportMode!=='QC'">Comment</th>
                                        <th>ID</th>
                                        <th ng-if="variantReportMode!=='QC'">aMOI</th>
                                        <th>Chrom</th>
                                        <th>Position</th>
                                        <th>CDS Ref</th>
                                        <th>CDS Alt</th>
                                        <th>OCP Ref</th>
                                        <th>OCP Alt</th>
                                        <th>Strand</th>
                                        <th>Allele Freq</th>
                                        <th>Func Gene</th>
                                        <th>Oncomine Variant Class</th>
                                        <th>Exon</th>
                                        <th>Function</th>
                                        <th>HGVS</th>
                                        <th>Read Depth</th>
                                        <th>Transcript</th>
                                        <th>Protein</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="variant in currentBloodVariantReport.variants.snvs_and_indels" style="cursor: auto;" role="row" class="odd">
                                        <td ng-if="variantReportMode!=='QC'">
                                            <div check-box-with-confirm confirm-title="{{confirmTitle}}" confirm-message="{{confirmMessage}}" is-checked="variant.confirmed" comment="variant.comment" prompt-only-if="true" enabled="currentBloodVariantReport.status==='PENDING'">
                                            </div>
                                        </td>
                                        <td ng-if="variantReportMode!=='QC'">
                                            <a ng-if="variant.comment " href ng-click="editComment(variant, currentBloodVariantReport.status==='PENDING' )"> <i class="fa fa-file-text-o "></i></a>
                                        </td>
                                        <td>{{variant.id}}</td>
                                        <td ng-if="variantReportMode!=='QC'">{{variant.aMOI}}<sup>({{variant.inclusion}})</sup></td>
                                        <td>{{variant.chrom}}</td>
                                        <td>{{variant.position}}</td>
                                        <td>{{variant.cds_ref}}</td>
                                        <td>{{variant.cds_alt}}</td>
                                        <td>{{variant.ocp_ref}}</td>
                                        <td>{{variant.ocp_alt}}</td>
                                        <td>{{variant.strand}}</td>
                                        <td>{{variant.alleleFreq}}</td>
                                        <td>{{variant.funcGene}}</td>
                                        <td>{{variant.oncomineVariantClass}}</td>
                                        <td>{{variant.exon}}</td>
                                        <td>{{variant.funct}}</td>
                                        <td>{{variant.hGVS}}</td>
                                        <td>{{variant.readDepth}}</td>
                                        <td>{{variant.transcript}}</td>
                                        <td>{{variant.protein}}</td>
                                    </tr>

                                    <tr ng-if="!currentBloodVariantReport.variants.snvs_and_indels || !currentBloodVariantReport.variants.snvs_and_indels.length">
                                        <td colspan="8"><span class="text-muted">No SNVs, MNVs or Indels</span></td>
                                    </tr>
                                </tbody>
                            </table>


                            <!--Copy Number Variant(s)-->
                            <div class="ibox-title ibox-title-no-line">
                                <h3>Copy Number Variant(s)</h3>
                            </div>

                            <table class="table table-hover" role="grid">
                                <thead>
                                    <tr>
                                        <th ng-if="variantReportMode!=='QC'">Confirm</th>
                                        <th ng-if="variantReportMode!=='QC'">Comment</th>
                                        <th>ID</th>
                                        <th ng-if="variantReportMode!=='QC'">aMOI</th>
                                        <th>Chrom</th>
                                        <th>Raw CN</th>
                                        <th>CN</th>
                                        <th>CI 5%</th>
                                        <th>CI 95%</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="variant in currentBloodVariantReport.variants.copy_number_variants" style="cursor: auto;" role="row" class="odd">
                                        <td ng-if="variantReportMode!=='QC'">
                                            <div check-box-with-confirm confirm-title="{{confirmTitle}}" confirm-message="{{confirmMessage}}" is-checked="variant.confirmed" comment="variant.comment" prompt-only-if="true" enabled="currentBloodVariantReport.status==='PENDING'">
                                            </div>
                                        </td>
                                        <td ng-if="variantReportMode!=='QC'">
                                            <a ng-if="variant.comment " href ng-click="editComment(variant, currentBloodVariantReport.status==='PENDING' )"> <i class="fa fa-file-text-o "></i></a>
                                        </td>
                                        <td>{{variant.id}}</td>
                                        <td ng-if="variantReportMode!=='QC'">{{variant.aMOI}}<sup>({{variant.inclusion}})</sup></td>
                                        <td>{{variant.chrom}}</td>
                                        <td>{{variant.rawCN}}</td>
                                        <td>{{variant.cn}}</td>
                                        <td>{{variant.ci5percent}}</td>
                                        <td>{{variant.ci95percent}}</td>
                                    </tr>

                                    <tr ng-if="!currentBloodVariantReport.variants.copy_number_variants || !currentBloodVariantReport.variants.copy_number_variants.length">
                                        <td colspan="8"><span class="text-muted">No Copy Number Variants</span></td>
                                    </tr>
                                </tbody>
                            </table>

                            <!--Gene Fusion(s)-->
                            <div class="ibox-title ibox-title-no-line">
                                <h3>Gene Fusion(s)</h3>
                            </div>

                            <table class="table table-hover" role="grid">
                                <thead>
                                    <tr>
                                        <th ng-if="variantReportMode!=='QC'">Confirm</th>
                                        <th ng-if="variantReportMode!=='QC'">Comment</th>
                                        <th>ID</th>
                                        <th ng-if="variantReportMode!=='QC'">aMOI</th>
                                        <th>Gene 2</th>
                                        <th>Gene 2 Count</th>
                                        <th>Gene 1</th>
                                        <th>Gene 1 Count</th>
                                        <th>Annotation</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="variant in currentBloodVariantReport.variants.gene_fusions" style="cursor: auto;" role="row" class="odd">
                                        <td ng-if="variantReportMode!=='QC'">
                                            <div check-box-with-confirm confirm-title="{{confirmTitle}}" confirm-message="{{confirmMessage}}" is-checked="variant.confirmed" comment="variant.comment" prompt-only-if="true" enabled="currentBloodVariantReport.status==='PENDING'">
                                            </div>
                                        </td>
                                        <td ng-if="variantReportMode!=='QC'">
                                            <a ng-if="variant.comment " href ng-click="editComment(variant, currentBloodVariantReport.status==='PENDING' )"> <i class="fa fa-file-text-o "></i></a>
                                        </td>
                                        <td>{{variant.id}}</td>
                                        <td ng-if="variantReportMode!=='QC'">{{variant.aMOI}}<sup>({{variant.inclusion}})</sup></td>
                                        <td>{{variant.gene2}}</td>
                                        <td>{{variant.gene2count}}</td>
                                        <td>{{variant.gene1}}</td>
                                        <td>{{variant.gene1count}}</td>
                                        <td>{{variant.annotation}}</td>
                                    </tr>

                                    <tr ng-if="!currentBloodVariantReport.variants.gene_fusions || !currentBloodVariantReport.variants.gene_fusions.length">
                                        <td colspan="8"><span class="text-muted">No Gene Fusions</span></td>
                                    </tr>
                                </tbody>
                            </table>

                            <div class="ibox-content ibox-title-no-line" ng-if="showVariantReportActions(currentBloodVariantReport)">
                                <div class="row">
                                    <div class="col-md-12 text-center">
                                        <button class="btn btn-danger" title="Reject this Report" ng-click="rejectVariantReport(currentBloodVariantReport)">REJECT</button>
                                        <button class="btn btn-success" title="Confirm this Report" ng-click="confirmVariantReport(currentBloodVariantReport)">CONFIRM</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div ng-if="!currentBloodVariantReport">
                            <div class="row">
                                <div class="col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2">
                                    <div class="no-data-panel text-muted">
                                        <i class="fa fa-info-circle fa-2x"></i><span> The Blood Variant Report has not been received.</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </uib-tab>

                <uib-tab heading="Documents" select="setActiveTab('documents')">
                    <div class="panel-body ">

                        <div class="ibox float-e-margins">
                            <div class="ibox-title ibox-title-no-line">
                                <h3>Patient Documents</h3>
                            </div>

                            <table class="table table-hover" role="grid">
                                <thead>
                                    <tr>
                                        <th width="20%" class="label2 sorting_disabled">Document</th>
                                        <th width="40%" class="label2 sorting_disabled">Comment</th>
                                        <th width="20%" class="label2 sorting_disabled">Uploaded Date</th>
                                        <th width="10%" class="label2 sorting_disabled">User</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr ng-repeat="document in data.documents.list" style="cursor: auto;" role="row" class="odd">
                                        <td><a href="{{document.url}}" target="_blank">{{document.name}}</a></td>
                                        <td>{{document.comment}}</td>
                                        <td>{{document.uploaded_date | utc}}</td>
                                        <td>{{document.user}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <form class="dropzone" method="post" enctype="multipart/form-data" ng-dropzone dropzone="dropzone" dropzone-config="dropzoneConfig" event-handlers="{ 'addedfile': dzAddedFile, 'error': dzError }">
                        </form>
                    </div>
                </uib-tab>
            </uib-tabset>
        </div>
    </div>
</div>